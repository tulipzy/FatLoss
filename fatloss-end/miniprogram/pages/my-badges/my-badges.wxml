<view class="badges-container">
  <view class="header">
    <text class="title">我的勋章</text>
    <text class="sub-desc">累计获得 {{ownedBadges.length}} 枚勋章 坚持记录，解锁更多惊喜~</text>
  </view>

  <view class="scroll-container">
    <scroll-view class="badges-scroll" scroll-x show-scrollbar="{{false}}">
      <view class="badge-item" wx:for="{{ownedBadges}}" wx:key="id">
        <image 
          src="{{item.imageUrl}}" 
          class="badge-image"
          mode="aspectFit"
          bindtap="onBadgeTap"
          data-index="{{index}}"
        ></image>
        <text class="badge-name">{{item.name}}</text>
        <text class="badge-desc">{{item.desc}}</text>
      </view>
    </scroll-view>
  </view>

  <view class="unlocked-section" wx:if="{{unlockedBadges.length > 0}}">
    <text class="unlocked-title">待解锁勋章</text>
    <view class="unlocked-list">
      <view class="unlocked-item" wx:for="{{unlockedBadges}}" wx:key="id">
        <image 
          src="{{item.imageUrl}}" 
          class="badge-image locked-image"
          mode="aspectFit"
        ></image>
        <text class="badge-name locked-name">{{item.name}}</text>
        <text class="badge-desc locked-desc">{{item.condition}}</text>
      </view>
    </view>
  </view>

  <view class="task-card" wx:if="{{taskProgress.length > 0}}">
    <view class="task-item" wx:for="{{taskProgress}}" wx:key="id">
      <text class="task-title">{{item.desc}}</text>
      <view class="progress-wrap">
        <view class="progress-text">
          <text>{{item.current}}/{{item.target}}{{item.unit}}</text>
          <text class="unlock-tip">距离「{{item.badgeName}}」还差 {{item.target - item.current}}{{item.unit}}</text>
        </view>
        <view class="progress-bar">
          <view class="progress" style="width: {{ (item.current / item.target) * 100 + '%' }}"></view>
        </view>
      </view>
    </view>
  </view>
</view>