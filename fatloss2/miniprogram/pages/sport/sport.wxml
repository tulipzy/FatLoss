<!--pages/sport/sport.wxml-->
<view class="container">
  <!-- 顶部用户信息 -->
  <view class="header">
    <view class="title" style="position: relative; left: -162rpx; top: 0rpx">今日目标：减脂训练</view>
    <view class="user-level">
      <text style="position: relative; left: 188rpx; top: -38rpx">Lv.{{userData.level}}</text>
      <text class="level-name" style="position: relative; left: 179rpx; top: 3rpx">健身达人</text>
      <view class="exp-bar">
        <view class="exp-progress" style="{{'width: ' + progress + '%;'}}"></view>
      </view>
      <text class="exp-text" style="position: relative; left: 167rpx; top: 1rpx">{{userData.experience}}/{{userData.nextLevelExp}}经验</text>
    </view>
  </view>
  
  <!-- 数据卡片区域 -->
  <view class="data-cards">
    <view class="data-card" style="width: 211rpx; height: 174rpx; display: block; box-sizing: border-box">
      <text class="data-label">已消耗</text>
      <text class="data-value">1200 千卡</text>
    </view>
    <view class="data-card" style="width: 174rpx; height: 174rpx; display: block; box-sizing: border-box">
      <text class="data-label">训练时长</text>
      <text class="data-value">45 分钟</text>
    </view>
    <view class="data-card" style="width: 183rpx; height: 174rpx; display: block; box-sizing: border-box">
      <text class="data-label">完成组数</text>
      <text class="data-value">3 组</text>
    </view>
  </view>
  
  <!-- 卡路里消耗曲线 -->
  <view class="chart-container">
    <canvas canvas-id="calories-chart" id="calories-chart"></canvas>
  </view>
  
  <!-- 挑战计时器 -->
  <view class="challenge-timer">
    <text>挑战剩余时间: {{challengeTimer}}</text>
  </view>
  
  <!-- 控制按钮 -->
  <view class="control-buttons">
    <button class="complete-btn" id="completeSetBtn" bindtap="completeSet">✓ 完成组</button>
  </view>
  
  <!-- 商店区域 -->
  <view class="shop-section">
    <view class="section-title">
      <text>商店</text>
      <text class="diamond-count">💎 {{userData.diamonds}}</text>
    </view>
    
    <view class="shop-items">
      <view class="shop-item" id="item-训练计划" bindtap="purchaseItem" data-cost="80" data-name="训练计划">
        <text>1周专业训练计划</text>
        <text>💎 80</text>
      </view>
      <view class="shop-item" id="item-饮食指南" bindtap="purchaseItem" data-cost="120" data-name="饮食指南">
        <text>减脂饮食指南</text>
        <text>💎 120</text>
      </view>
    </view>
  </view>
  
  <!-- 好友排行榜 -->
  <view class="friends-rank">
    <view class="section-title">
      <text>好友排行榜</text>
      <text class="add-friend">+ 添加好友</text>
    </view>
    
    <block wx:for="{{userData.friends}}" wx:key="name">
      <view class="rank-item">
        <text class="rank-number">{{index + 1}}</text>
        <image class="rank-avatar" src="{{item.avatar}}"></image>
        <view class="rank-info">
          <text class="rank-name">{{item.name}}</text>
          <text class="rank-meta">本周训练: {{item.minutes}}分钟</text>
        </view>
        <text class="rank-calories">{{item.calories}}千卡</text>
      </view>
    </block>
  </view>
</view>