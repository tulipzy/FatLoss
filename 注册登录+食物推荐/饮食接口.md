# 饮食接口

- ## 1.计算总热量和制造热量缺口后的数据

  根据身高，体重，目标体重，性别进行计算（每次放用户修改体重时重新计算）

  

  ### POST请求:http://localhost:9090/Calorie/calculate

  ```
  {
    "id": "071563acc1004860a77393b35f73e635"
  }
  
  ```

  这个id从存入的storage获取

  #### 请求成功：

  ```
  {
      "msg": "请求成功",
      "data": {
          "id": 11,
          "userId": "071563acc1004860a77393b35f73e635",
          "tdee": 1770,
          "caloriePlan": 1270,
      },
      "code": "200"
  }
  ```

  ```
  {
      "msg": "请求成功",
      "data": {
          "id": 17,
          "userId": "a631c63702a5453c86fce9a42008e54a",
          "tdee": 2243,
          "caloriePlan": 2543,
          "recordDate": "2025-08-12"
      },
      "code": "200"
  }
  ```

  

  #### 请求失败

  ```
  {
      "msg": "计算失败: 用户不存在",
      "data": null,
      "code": "400"
  }
  ```

  - ## 2.将食物插入表（food_intake）

    ### 请求：http://localhost:9090/FoodIntake/add

    ```
    {
      "userId": "071563acc1004860a77393b35f73e635",
      "foodName": "红烧肉",
      "calorie": 520
    }
    ```

    通过识别出的食物，选择是否插入表中，插入表中后更新今日的摄入量。还可摄入量=总的-今日摄入的。

![image-20250812124829918](C:\Users\86151\AppData\Roaming\Typora\typora-user-images\image-20250812124829918.png)

- ## 3.获取用户今天消耗的卡路里（一插入食物就要更新今日消耗卡路里->饮食摄入）

  **GET：**[localhost:9090/FoodIntake/totalCalorie?userId=071563acc1004860a77393b35f73e635](http://localhost:9090/FoodIntake/totalCalorie?userId=071563acc1004860a77393b35f73e635)

  #### 请求成功：data是卡路里

  ```
  {
    "msg": "请求成功",
    "data": 1140,
    "code": "200"
  }
  ```

  #### 请求失败：data是null就是0

  ```
  {
    "msg": "请求成功",
    "data": null,
    "code": "200"
  }
  ```

- ## 4.每天凌晨准时计算用户前一日总卡路里，之后清空food_intake数据库

  **这个不是接口，定时执行的不需要接口**
  
  
  
  

- ## 5.食物推荐

  POST：http://localhost:9090/api/diet/recommendations

  每日定时更新：

  ```
  [
      {
          "id": 3,
          "day": 3,
          "mealTime": "早餐",
          "carbSource": "煮玉米",
          "proteinSource": "煮鸡蛋",
          "fiberSource": "清炒白菜"
      },
      {
          "id": 10,
          "day": 3,
          "mealTime": "午餐",
          "carbSource": "糙米饭",
          "proteinSource": "瘦牛肉",
          "fiberSource": "炒青椒"
      },
      {
          "id": 17,
          "day": 3,
          "mealTime": "晚餐",
          "carbSource": "蒸土豆",
          "proteinSource": "虾仁",
          "fiberSource": "绿豆芽"
      }
  ]
  ```

  