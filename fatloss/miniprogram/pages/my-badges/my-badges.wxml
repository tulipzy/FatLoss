<view class="demo-container">
  <!-- é¡µé¢é¡¶éƒ¨å¯¼èˆª -->
  <view class="demo-header">
    <view class="back-btn" bindtap="onBackTap">â† </view>
    <view class="header-title">æˆ‘çš„å‹‹ç« </view>
    <view class="empty-space"></view>
  </view>

  <!-- æ¼”ç¤ºæ“ä½œæŒ‰é’® -->
  <view class="demo-operate-btn-group">
    <button class="demo-operate-btn" bindtap="onAddRecordDay">
      æ¨¡æ‹Ÿï¼šå¢åŠ 1å¤©è®°å½•
    </button>
    <button class="demo-operate-btn" bindtap="onAddExp">
      æ¨¡æ‹Ÿï¼šå¢åŠ 20ç‚¹ç»éªŒå€¼
    </button>
  </view>

  <!-- å·²è·å¾—å‹‹ç« åŒºåŸŸ -->
  <view class="section-container">
    <view class="section-header">
      <view class="section-title">æˆ‘çš„å‹‹ç« </view>
      <view class="section-desc">ç´¯è®¡è·å¾— {{ownedBadges.length}} æšå‹‹ç«  åšæŒè®°å½•ï¼Œè§£é”æ›´å¤šæƒŠå–œ~</view>
    </view>

    <view class="owned-badges">
      <view 
        class="owned-badge-item" 
        wx:for="{{ownedBadges}}" 
        wx:key="id"
        bindtap="onBadgeTap"
        data-index="{{index}}"
      >
        <image 
          src="{{item.imageUrl}}" 
          class="badge-image"
          mode="aspectFit"
          lazy-load="true"
          fallback-src="/images/weizhi.jpg"
        ></image>
        <!-- æ–°å‹‹ç« æ ‡è®° -->
        <view class="new-badge-tag" wx:if="{{item.isNew}}">æ–°</view>
        <view class="badge-name">{{item.name}}</view>
        <view class="badge-desc">{{item.desc}}</view>
      </view>
    </view>
  </view>

  <!-- å¾…è§£é”å‹‹ç« åŒºåŸŸ -->
  <view class="section-container" wx:if="{{unlockedBadges.length > 0}}">
    <view class="section-header">
      <view class="section-title">å¾…è§£é”å‹‹ç« </view>
    </view>

    <view class="unlocked-badges">
      <view 
        class="unlocked-badge-item" 
        wx:for="{{unlockedBadges}}" 
        wx:key="id"
      >
        <image 
          src="{{item.imageUrl}}" 
          class="unlocked-badge-image"
          mode="aspectFit"
          lazy-load="true"
          fallback-src="/images/weizhi.jpg"
        ></image>
        <view class="badge-name locked-name">{{item.name}}</view>
        <view class="badge-condition locked-condition">
          {{item.condition}}
        </view>
      </view>
    </view>
  </view>

  <!-- å‹‹ç« è¿›åº¦ä»»åŠ¡åŒºåŸŸ -->
  <view class="section-container" wx:if="{{taskProgress.length > 0}}">
    <view class="progress-item" wx:for="{{taskProgress}}" wx:key="id">
      <view class="progress-title">{{item.desc}}</view>
      <view class="progress-info">
        {{item.current}}{{item.unit}} / {{item.target}}{{item.unit}}
        <text class="progress-text">è·ç¦»ã€Œ{{item.badgeName}}ã€è¿˜å·® {{item.target - item.current}}{{item.unit}}</text>
      </view>
      <view class="progress-bar-container">
        <view 
          class="progress-bar-fill" 
          style="width: {{item.progressPercent + '%'}}; background-color: {{item.progressPercent >= 100 ? '#52C41A' : '#FF9900'}}"
        ></view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€æç¤º -->
  <view class="empty-state" wx:if="{{ownedBadges.length === 0 && unlockedBadges.length === 0}}">
    <view class="empty-icon">ğŸ“­</view>
    <view class="empty-title">æš‚æ— å‹‹ç« </view>
    <view class="empty-desc">å¿«å»å®Œæˆé¥®é£Ÿè®°å½•ï¼Œç§¯ç´¯ç»éªŒå€¼ï¼Œè§£é”ä½ çš„ç¬¬ä¸€æšå‹‹ç« å§ï¼</view>
    <button class="go-record-btn" bindtap="onGoRecordTap">å»è®°å½•</button>
  </view>
</view>