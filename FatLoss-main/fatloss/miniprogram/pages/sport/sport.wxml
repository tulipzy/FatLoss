<!--pages/sport/sport.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯ -->
  <view class="header">
    <view class="title" style="position: relative; left: -162rpx; top: 0rpx">ä»Šæ—¥ç›®æ ‡ï¼šå‡è„‚è®­ç»ƒ</view>
    <view class="user-level">
      <text style="position: relative; left: 188rpx; top: -38rpx">Lv.{{userInfo.level}}</text>
      <text class="level-name" style="position: relative; left: 179rpx; top: 3rpx">å¥èº«è¾¾äºº</text>
      <view class="exp-bar">
        <view class="exp-progress" style="{{'width: ' + (userInfo.experience / userInfo.maxExperience * 100) + '%;'}}"></view>
      </view>
      <text class="exp-text" style="position: relative; left: 167rpx; top: 1rpx">{{userInfo.experience}}/{{userInfo.maxExperience}}ç»éªŒ</text>
    </view>
  </view>
  
  <!-- æ•°æ®å¡ç‰‡åŒºåŸŸ -->
  <view class="data-cards">
    <view class="data-card" style="width: 211rpx; height: 174rpx; display: block; box-sizing: border-box">
      <text class="data-label">å·²æ¶ˆè€—</text>
      <text class="data-value">{{userInfo.caloriesBurned}} åƒå¡</text>
    </view>
    <view class="data-card" style="width: 174rpx; height: 174rpx; display: block; box-sizing: border-box">
      <text class="data-label">è®­ç»ƒæ—¶é•¿</text>
      <text class="data-value">{{userInfo.trainingTime}} åˆ†é’Ÿ</text>
    </view>
    <view class="data-card" style="width: 183rpx; height: 174rpx; display: block; box-sizing: border-box">
      <text class="data-label">å®Œæˆç»„æ•°</text>
      <text class="data-value">{{userInfo.completedSets}} ç»„</text>
    </view>
  </view>
  
  <!-- å¡è·¯é‡Œæ¶ˆè€—æ›²çº¿ -->
  <!-- æ·»åŠ å¡è·¯é‡Œå›¾è¡¨å®¹å™¨ -->
  <!-- æ·»åŠ å¡è·¯é‡Œå›¾è¡¨å®¹å™¨ -->
  
  
  <!-- ä»Šæ—¥è®­ç»ƒè®¡åˆ’ -->
  <view class="training-plan">
    <view class="section-title">
      <text>ä»Šæ—¥è®­ç»ƒè®¡åˆ’</text>
      <text class="view-all" style="position: relative; left: 338rpx; top: 0rpx">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <block wx:for="{{trainingPlan}}" wx:key="id">
      <view class="training-item {{item.status === 'completed' ? 'completed' : item.status === 'inProgress' ? 'in-progress' : ''}}">
        <text class="training-name">{{item.name}}</text>
        <text class="training-meta">{{item.duration}}åˆ†é’Ÿ Â· {{item.intensity}}</text>
        <text class="training-status">{{item.status === 'completed' ? 'å·²å®Œæˆ' : item.status === 'inProgress' ? 'è¿›è¡Œä¸­' : 'æœªå¼€å§‹'}}</text>
      </view>
    </block>
  </view>
  
  <!-- å½“å‰è®­ç»ƒè¯¦æƒ… -->
  <view class="current-training" wx:if="{{trainingPlan[1].status === 'inProgress'}}">
    <view class="section-title">
      <text>æ­£åœ¨è¿›è¡Œï¼š{{trainingPlan[1].name}}</text>
    </view>
    
    <view class="exercise-details">
      <text class="exercise-name">{{trainingPlan[1].exercise}}</text>
      <text class="set-info">ç¬¬{{trainingPlan[1].currentSet}}/{{trainingPlan[1].totalSets}}ç»„</text>
      
      <view class="exercise-meta">
        <view class="meta-item">
          <text class="meta-label">æ¯ç»„æ¬¡æ•°</text>
          <text class="meta-value">{{trainingPlan[1].repsPerSet}}æ¬¡</text>
        </view>
        <view class="meta-item">
          <text class="meta-label">ä¼‘æ¯æ—¶é—´</text>
          <text class="meta-value">{{trainingPlan[1].restTime}}ç§’</text>
        </view>
      </view>
      
      <view class="countdown-circle">
        <text class="countdown-text">{{countdown}}</text>
        <text class="countdown-label">å‰©ä½™æ—¶é—´</text>
      </view>
      
      <view class="control-buttons">
        <button class="pause-btn" bindtap="pauseTraining">â¸ï¸ æš‚åœ</button>
        <button class="complete-btn" bindtap="completeSet">âœ“ å®Œæˆç»„</button>
      </view>
    </view>
  </view>
  
  <!-- æˆå°±å’Œæ’è¡Œæ¦œåŒºåŸŸ -->
  <view class="achievements-section">
    <view class="section-title">
      <text>è®­ç»ƒæˆå°±</text>
      <text class="achievement-progress">å·²å®Œæˆ 3/5</text>
    </view>
    
    <view class="achievements-list">
      <block wx:for="{{achievements}}" wx:key="id">
        <view class="achievement-icon {{item.unlocked ? 'unlocked' : 'locked'}}">
          <text style="position: relative; left: -174rpx; top: -2rpx">{{item.icon === 'cup' ? 'ğŸ†' : 'ğŸ”¥'}}</text>
          <view class="achievement-check" wx:if="{{item.unlocked}}">âœ“</view>
        </view>
      </block>
      <view class="achievement-icon locked">
        <text>ğŸ“…</text>
        <view class="achievement-lock">ğŸ”’</view>
      </view>
      <view class="achievement-icon locked">
        <text>â­</text>
        <view class="achievement-lock">ğŸ”’</view>
      </view>
    </view>
  </view>
  
  <view class="friends-rank">
    <view class="section-title">
      <text>å¥½å‹æ’è¡Œæ¦œ</text>
      <text class="add-friend">+ æ·»åŠ å¥½å‹</text>
    </view>
    
    <block wx:for="{{friendsRank}}" wx:key="id">
      <view class="rank-item {{item.rank === 2 ? 'current-user' : ''}}">
        <text class="rank-number">{{item.rank}}</text>
        <image class="rank-avatar" src="{{item.avatar}}"></image>
        <view class="rank-info">
          <text class="rank-name">{{item.name}}</text>
          <text class="rank-meta">æœ¬å‘¨è®­ç»ƒ: {{item.weeklyTime}}åˆ†é’Ÿ</text>
        </view>
        <text class="rank-calories">{{item.calories}}åƒå¡</text>
      </view>
    </block>
    
    <button class="view-all-rank">æŸ¥çœ‹å®Œæ•´æ’è¡Œæ¦œ</button>
  </view>
</view>

<view class="fitness-module">
  <!-- å¤´éƒ¨æ ‡é¢˜ -->
  <view class="module-header">
    <text class="module-title">ä»Šæ—¥ç›®æ ‡ï¼šå‡è„‚è®­ç»ƒ</text>
    <text class="module-subtitle">å®Œæˆä»¥ä¸‹è®­ç»ƒï¼Œç‡ƒçƒ§æ›´å¤šå¡è·¯é‡Œ</text>
  </view>

  <!-- æ•°æ®ä»ªè¡¨åŒº -->
  <view class="stats-container">
    <view class="stat-card bg-orange">
      <text class="value">{{caloriesBurned}}</text>
      <text class="unit">åƒå¡</text>
      <text class="label">å·²æ¶ˆè€—</text>
    </view>
    <!-- è®­ç»ƒæ—¶é•¿/å®Œæˆç»„æ•°å¡ç‰‡ -->
  </view>
  
    <view class="stat-card bg-blue">
      <text class="value">{{trainingTime}}</text>
      <text class="unit">åˆ†é’Ÿ</text>
      <text class="label">è®­ç»ƒæ—¶é•¿</text>
    </view>
    
    <view class="stat-card bg-green">
      <text class="value">{{completedSets}}</text>
      <text class="unit">ç»„</text>
      <text class="label">å®Œæˆç»„æ•°</text>
    </view>
  </view>

  <!-- å›¾è¡¨åŒºåŸŸ -->
  <view class="chart-container">
    <text class="chart-title">å¡è·¯é‡Œæ¶ˆè€—è¶‹åŠ¿</text>
    <view class="chart-wrapper">
      <canvas canvas-id="calories-chart" id="calories-chart"></canvas>
    </view>
  </view>
<!-- åˆ é™¤æ­¤è¡Œ -->

<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å’Œè¿›åº¦ -->
  <view class="bg-white rounded-xl p-6 mb-6 card-shadow">
    <view class="flex flex-col md:flex-row md:items-center justify-between gap-4">
      <view>
        <text class="text-lg font-semibold">ä»Šæ—¥ç›®æ ‡ï¼šå‡è„‚è®­ç»ƒ</text>
        <text class="text-gray-500 text-sm">å®Œæˆä»¥ä¸‹è®­ç»ƒï¼Œç‡ƒçƒ§æ›´å¤šå¡è·¯é‡Œ</text>
      </view>
      <view class="flex items-center">
        <view class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold mr-2">
          Lv.{{userLevel}}
        </view>
        <view>
          <view class="flex items-center text-sm">
            <text class="font-medium">{{userTitle}}</text>
            <text class="text-gray-500 ml-2">{{currentExp}}/{{totalExp}}ç»éªŒ</text>
          </view>
          <view class="w-48 bg-gray-200 rounded-full h-1.5 mt-1">
            <view class="bg-primary h-1.5 rounded-full" style="width: {{expProgress}}%"></view>
          </view>
        </view>
      </view>
    </view>
    
    <view class="grid grid-cols-3 gap-4 mt-6">
      <view class="bg-gray-50 rounded-lg p-4 text-center">
        <text class="text-xs text-gray-500 mb-1">å·²æ¶ˆè€—</text>
        <text class="text-xl font-bold text-primary">{{caloriesBurned}}<text class="text-sm font-normal ml-1">åƒå¡</text></text>
      </view>
      <view class="bg-gray-50 rounded-lg p-4 text-center">
        <text class="text-xs text-gray-500 mb-1">è®­ç»ƒæ—¶é•¿</text>
        <text class="text-xl font-bold text-primary">{{trainingTime}}<text class="text-sm font-normal ml-1">åˆ†é’Ÿ</text></text>
      </view>
      <view class="bg-gray-50 rounded-lg p-4 text-center">
        <text class="text-xs text-gray-500 mb-1">å®Œæˆç»„æ•°</text>
        <text class="text-xl font-bold text-primary">{{completedSets}}<text class="text-sm font-normal ml-1">ç»„</text></text>
      </view>
    </view>
  </view>
</view>

<view class="container">
  <!-- æ•°æ®å›¾è¡¨ -->
  <view class="mt-6">
    <canvas canvas-id="workoutChart" id="workoutChart"></canvas>
  </view>
</view>

<view class="container">
  <!-- æ·»åŠ å”¯ä¸€æ ¹å®¹å™¨ -->
  <view class="page-root">
    <!-- åŸæœ‰çš„æ‰€æœ‰å†…å®¹éƒ½åµŒå¥—åœ¨è¿™ä¸ªæ ¹å®¹å™¨å†… -->
    <view class="container">...</view>
    <view class="fitness-module">...</view>
    <view class="container">...</view>
    <!-- å…¶ä»–æ‰€æœ‰è§†å›¾å…ƒç´  -->
  </view>
</view>
<!-- å•†åº— -->
<view class="bg-white rounded-xl p-6 mb-6 card-shadow">
  <view class="flex justify-between items-center mb-4">
    <text class="text-xl font-bold">å•†åº—</text>
    <view class="flex items-center">
      <text class="text-warning mr-1">ğŸ’</text>
      <text class="font-medium">240</text>
    </view>
  </view>
  
  <view class="grid grid-cols-2 gap-4">
    <view class="card-hover bg-gray-50 rounded-xl overflow-hidden">
      <view class="h-24 bg-primary/10 flex items-center justify-center">
        <text class="text-3xl text-primary">ğŸ“…</text>
      </view>
      <view class="p-3">
        <text class="font-medium text-sm mb-1">1å‘¨ä¸“ä¸šè®­ç»ƒè®¡åˆ’</text>
        <view class="flex justify-between items-center">
          <text class="text-xs text-gray-500">7å¤©å®Œæ•´è®¡åˆ’</text>
          <view class="flex items-center">
            <text class="text-warning text-xs mr-1">ğŸ’</text>
            <text class="text-sm font-medium">80</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="card-hover bg-gray-50 rounded-xl overflow-hidden">
      <view class="h-24 bg-secondary/10 flex items-center justify-center">
        <text class="text-3xl text-secondary">ğŸ´</text>
      </view>
      <view class="p-3">
        <text class="font-medium text-sm mb-1">å‡è„‚é¥®é£ŸæŒ‡å—</text>
        <view class="flex justify-between items-center">
          <text class="text-xs text-gray-500">ä¸“ä¸šè¥å…»å»ºè®®</text>
          <view class="flex items-center">
            <text class="text-warning text-xs mr-1">ğŸ’</text>
            <text class="text-sm font-medium">120</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="card-hover bg-gray-50 rounded-xl overflow-hidden">
      <view class="h-24 bg-success/10 flex items-center justify-center">
        <text class="text-3xl text-success">â–¶ï¸</text>
      </view>
      <view class="p-3">
        <text class="font-medium text-sm mb-1">é«˜çº§è®­ç»ƒè§†é¢‘</text>
        <view class="flex justify-between items-center">
          <text class="text-xs text-gray-500">10ä¸ªä¸“ä¸šæ•™å­¦</text>
          <view class="flex items-center">
            <text class="text-warning text-xs mr-1">ğŸ’</text>
            <text class="text-sm font-medium">150</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="card-hover bg-gray-50 rounded-xl overflow-hidden">
      <view class="h-24 bg-warning/10 flex items-center justify-center">
        <text class="text-3xl text-warning">ğŸ””</text>
      </view>
      <view class="p-3">
        <text class="font-medium text-sm mb-1">1ä¸ªæœˆæé†’æœåŠ¡</text>
        <view class="flex justify-between items-center">
          <text class="text-xs text-gray-500">è®­ç»ƒæ—¶é—´æé†’</text>
          <view class="flex items-center">
            <text class="text-warning text-xs mr-1">ğŸ’</text>
            <text class="text-sm font-medium">50</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>

<view class="bg-white rounded-xl p-4 mb-6">
  <view class="flex justify-between items-center mb-3">
    <text class="font-bold text-lg">è®­ç»ƒæˆå°±</text>
    <text class="text-sm text-primary">å·²å®Œæˆ 3/5</text>
  </view>
  <view class="flex space-x-3">
    <!-- å·²è§£é”å¾½ç«  -->
    <view class="relative">
      <view class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
        ğŸ†
      </view>
      <view class="absolute -top-1 -right-1 bg-success text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
        âœ”ï¸
      </view>
    </view>
    <view class="relative">
      <view class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
        ğŸ”¥
      </view>
      <view class="absolute -top-1 -right-1 bg-success text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
        âœ”ï¸
      </view>
    </view>
    <view class="relative">
      <view class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
        â­
      </view>
      <view class="absolute -top-1 -right-1 bg-success text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
        âœ”ï¸
      </view>
    </view>
  </view>
</view>

<!-- é”å®šçš„å¾½ç«  -->
<view class="relative">
  <view class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center">
    ğŸ”’
  </view>
  <view class="absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs text-center rounded-b">
    è¿ç»­7å¤©è®­ç»ƒ
  </view>
</view>
<view class="relative">
  <view class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center">
    <!-- 455è¡Œ -->
ğŸ”’
<!-- 456è¡Œ -->
</view>
<!-- 457è¡Œ -->
<view class="absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs text-center rounded-b">
  <!-- 458è¡Œ -->
  ç´¯è®¡æ¶ˆè€—10000åƒå¡
</view>  <!-- æ·»åŠ ç»“æŸæ ‡ç­¾ -->
<!-- 459è¡Œ -->
<!-- å‡è®¾è¿™é‡Œç¼ºå°‘äº†å¼€å§‹æ ‡ç­¾ -->
<!-- 460è¡Œ -->
<view class="ranking-container">
  <!-- æ’è¡Œæ¦œå†…å®¹ -->
</view>
  <view class="title">å¥½å‹æ’è¡Œæ¦œ</view>
  <view class="list">
    <!-- æ’è¡Œæ¦œå†…å®¹ -->
  </view>
</view>  <!-- å¯¹åº”ä¸Šé¢çš„ <view class="ranking-container"> -->

<!-- å¥½å‹æ’è¡Œæ¦œ -->
<view class="bg-white rounded-xl p-6 mb-6 card-shadow">
  <view class="flex justify-between items-center mb-4">
    <text class="text-xl font-bold">å¥½å‹æ’è¡Œæ¦œ</text>
    <button class="text-primary text-sm font-medium" bindtap="addFriend">
      â• æ·»åŠ å¥½å‹
    </button>
  </view>
  
  <view class="space-y-3">
    <!-- æ’è¡Œæ¦œé¡¹ -->
    <view class="flex items-center p-3 bg-gray-50 rounded-lg">
      <view class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold">1</view>
      <image src="https://picsum.photos/32/32?random=1" alt="ç”¨æˆ·å¤´åƒ" class="w-8 h-8 rounded-full mx-3"></image>
      <view class="flex-grow">
        <text class="font-medium">å¼ ä¸‰</text>
        <text class="text-xs text-gray-500">æœ¬å‘¨è®­ç»ƒ: 120åˆ†é’Ÿ</text>
      </view>
      <text class="text-primary font-bold">2400åƒå¡</text>
    </view>
    
    <view class="flex items-center p-3 bg-primary/5 rounded-lg border-l-4 border-primary">
      <view class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold">2</view>
      <image src="https://picsum.photos/32/32?random=2" alt="ç”¨æˆ·å¤´åƒ" class="w-8 h-8 rounded-full mx-3"></image>
      <view class="flex-grow">
        <text class="font-medium">ä½ </text>
        <text class="text-xs text-gray-500">æœ¬å‘¨è®­ç»ƒ: 105åˆ†é’Ÿ</text>
      </view>
      <text class="text-primary font-bold">2100åƒå¡</text>
    </view>
    
    <view class="flex items-center p-3 bg-gray-50 rounded-lg">
      <view class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-bold">3</view>
      <image src="https://picsum.photos/32/32?random=3" alt="ç”¨æˆ·å¤´åƒ" class="w-8 h-8 rounded-full mx-3"></image>
      <view class="flex-grow">
        <text class="font-medium">æå››</text>
        <text class="text-xs text-gray-500">æœ¬å‘¨è®­ç»ƒ: 90åˆ†é’Ÿ</text>
      </view>
      <text class="text-primary font-bold">1800åƒå¡</text>
    </view>
    
    <view class="flex items-center p-3 bg-gray-50 rounded-lg">
      <view class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-bold">4</view>
      <image src="https://picsum.photos/32/32?random=4" alt="ç”¨æˆ·å¤´åƒ" class="w-8 h-8 rounded-full mx-3"></image>
      <view class="flex-grow">
        <text class="font-medium">ç‹äº”</text>
        <text class="text-xs text-gray-500">æœ¬å‘¨è®­ç»ƒ: 75åˆ†é’Ÿ</text>
      </view>
      <text class="text-primary font-bold">1500åƒå¡</text>
    </view>
  </view>
  
  <button class="mt-4 w-full py-2 text-primary rounded-lg border border-primary/30 font-medium btn-hover" bindtap="viewFullRanking">
    æŸ¥çœ‹å®Œæ•´æ’è¡Œæ¦œ
  </button>
</view>